# Variables d'environnement LMS

## üîë Variables Requises

### **Supabase (Production)**
```bash
# URL de votre projet Supabase
SUPABASE_URL=https://your-project.supabase.co

# Cl√© anonyme (publique)
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Cl√©s publiques (pour le client)
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

### **Supabase (Service Role - SERVEUR UNIQUEMENT)**
```bash
# ‚ö†Ô∏è JAMAIS expos√©e au client - serveur uniquement
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

## üìä Variables Optionnelles

### **Monitoring Sentry**
```bash
# DSN Sentry pour capture d'erreurs
SENTRY_DSN=https://xxx@sentry.io/xxx
SENTRY_ORG=your-org-name
SENTRY_PROJECT=lms
```

### **Logs**
```bash
# Niveau de log (debug, info, warn, error)
LOG_LEVEL=info
```

### **Site**
```bash
# URL du site en production
NEXT_PUBLIC_SITE_URL=https://your-app.vercel.app
```

## üîß Configuration par Environnement

### **D√©veloppement (.env.local)**
```bash
SUPABASE_URL=http://localhost:54321
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
NEXT_PUBLIC_SUPABASE_URL=http://localhost:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
LOG_LEVEL=debug
```

### **Preview (Vercel Preview)**
```bash
# M√™mes variables que production mais avec base de test
SUPABASE_URL=https://your-test-project.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
NEXT_PUBLIC_SUPABASE_URL=https://your-test-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

### **Production (Vercel Production)**
```bash
# Variables de production
SUPABASE_URL=https://your-prod-project.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
NEXT_PUBLIC_SUPABASE_URL=https://your-prod-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SENTRY_DSN=https://xxx@sentry.io/xxx
LOG_LEVEL=info
NEXT_PUBLIC_SITE_URL=https://your-app.vercel.app
```

## ‚ö†Ô∏è S√©curit√©

### **Variables Sensibles**
- `SUPABASE_SERVICE_ROLE_KEY` : Acc√®s complet √† la DB
- `SENTRY_DSN` : Peut contenir des donn√©es sensibles

### **Bonnes Pratiques**
1. **Rotation r√©guli√®re** des cl√©s Supabase
2. **S√©paration** des environnements (dev/test/prod)
3. **Audit** des acc√®s aux variables
4. **Monitoring** des utilisations anormales

## üîç V√©rification

### **Test des variables**
```bash
# V√©rifier que les variables sont charg√©es
npm run dev
# Consulter les logs pour voir les variables charg√©es

# Test API
curl -H "Authorization: Bearer $SUPABASE_ANON_KEY" \
  "$SUPABASE_URL/rest/v1/"
```

### **Debug**
```bash
# Afficher les variables (sans les valeurs)
vercel env ls

# Pull des variables de production
vercel env pull .env.local
```
